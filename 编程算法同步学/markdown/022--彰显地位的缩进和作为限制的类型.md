### Python的缩进（indent）

#### 结构特征

现在我们来了解一下Python的 **结构特性**
：划分代码块——Python使用空格缩进（indent）划分代码块，而不是像其他高级语言那样，用大括号或者关键词来划分。

这一点非常重要，一方面它使得Python看起来更像自然语言，增加了Python的可读性。

但另一方面，这样做等于放弃了显性地划分代码块，而是采用了一种半隐性的形式，使得初学者有时容易混淆代码块的起止，在一定程度上造成了初学者的困扰。

为了避免后面迷失在代码里，大家在这里 **务必** 把代码块的概念和Python划分代码块的规则搞清楚！

#### 代码块

到底什么叫代码块呢？

在计算机程序里，一个 **代码块** （block/code block）是一个词法结构，这个结构里包含一行或多行代码（程序语句）。

代码块是程序的一种基础结构， **一个代码块中的各条语句** 是按顺序依次执行的，它们 **之间是平等的** 。

#### 代码块的起止

有些语言，用 ** _关键字_** 来表示一个代码块的开始和结束。比如 **PASCAL** ：

    
    
    program Hello;
    begin
      writeln ('hello world');
    end.
    

有些语言用 ** _大括号_** 来划定代码块范围。比如 **Java** ：

    
    
    public class HelloWorld {
          public static void main(String[] args){
            System.out.println("Hello World!");
        }
    }
    

虽然在这些语言里，为了让人类读者能够一目了然语句间的层次关系，属于内部代码块的语句也会缩进若干空格，但这些缩进并没有实际上的功能性，就算不缩进，也不影响编译运行。

而Python语言直接用缩进标识代码块。增加缩进表示代码块的开始，而减少缩进则表示代码块的结束——如下图这样：

![enter image description
here](https://images.gitbook.cn/b6b07420-8b51-11e9-b38f-03c8201e19f7)

**Python里，缩进成为了语法的一部分** 。违反了缩进规则的程序根本不能被解释器通过，也就无法执行！

按照Python官方的规定，每级的缩进都必须使用4个空格来表示。不过每次都要连着按四个空格太费劲了，很多人都偷懒用Tab字符代替。

这样是不规范的，就算要用Tab，也应该是将编辑器的Tab键转换为4个空格。好在我们用的PyCharm默认就已经做了这个设置:

![enter image description
here](https://images.gitbook.cn/c5304e80-8b51-11e9-a560-030275e59b13)

这样，在用PyCharm编写Python程序时，可以放心的用Tab缩进啦。

另外， **Python的一行代码结尾时没有任何标点符号** ，这一点和C，Java都不同。

#### 代码块的嵌套

大多数编程语言（当然包括Python）都允许代码块嵌套，也就是说一个代码块中可以包含另一个代码块。

被包含的代码块相较于包含它的代码块多一次缩进（1个indent == 4个空格），且前者和后者地位不相同——前者从属于后者。

我们在把上面的代码块图细化一下，来看看其中的语句，假设三个代码块中的语句分布分别是这样的（见下图）：

![enter image description
here](https://images.gitbook.cn/ea6fd400-90d2-11e9-b1c2-73ac1256586b)

Block1
中一共有5个语句：Line1，Line2，Line3，Line9和Line10，它们之间的地位是平等的——这些语句要么都执行，要么都不执行。如果Line1执行了，则Line2，Line3，Line9和Line10就一定会执行。

Block2中一共有3个语句：Line4，Line5和Line8。

Block2从属于Block1。Block2中的3个语句，有可能根本不执行。Block2执行与否，由Block1决定。

也就是说，虽然都是语句，Line4，Line5，Line8和Line1，Line2，Line3，Line9，Line10相比，“地位低了一等”。

但Block2中的3个语句之间是平等的，如果Line4执行了，则Line5和Line8也会执行。

含有2个语句Line6和Line7的Block3从属于Block2，它比Block2又低了一等。Block3中的语句是否执行，由Block2中的语句决定。

这要抽象地说，可能不太好理解，不过大家要知道： **控制流程的条件和循环结构就是通过代码块的嵌套来实现的**
——这些我们后面都会学到。现在，还只是能把代码块、缩进和嵌套的概念先记住。

### 数据值和数据类型

数据是所有计算机程序必然要处理的内容，为了能够更好的处理数据，几乎所有编程语言都设置了数据类型。现在我们就来讲讲数据和数据类型这两个概念。

#### 数据的抽象和具象含义

**数据** 这个术语有 **抽象** 和 **具象** 两层含义:

  * 前者是统称，泛指所有的具体数据。抽象的数据是计算机加工处理的对象。

  * 而具体的一条数据，则表现为数据值。值是对事物形态、特征的表达和度量，包含的内容十分广泛。

下面就是一些具体的 ** _数据值_** ：

> 某甲的年龄是； 某乙的电话号码； 某建筑物的经纬度坐标； 某地人口普查的统计结果； 某国的GPD在不同产业间的分布； 某支股票在某时段内的涨跌；
> 某款app的下载地址； 某公司的组织结构； ……

数据值是人类最有价值的东西。

### 数据类型

客观事物多种多样，度量它们的值自然也分为不同的类型。

数据类型是所有编程语言都涉及到的概念，而且，所有编程语言都有一些基本类型，部分编程语言在基本类型之外还有扩展类型，还有部分语言允许用户自定义数据类型。

对于几乎所有编程语言而言，下面几种类型都是基本类型（包括但不限于）：

  * 整（数）型：表示整数, 取值为：{…, -2, -1, 0, 1, 2, …}
  * 实（数）型：又可以分为定点型和浮点型，表示小数，取值为：{…, -3.78, …, -0,5, …, 0.0, …, 1.0, …, 5.83, …}
  * 字符型：表示一个个的字符，取值为：{…, ‘A’, …, ‘Z’, ‘a’, …, ‘z’, ‘0’, …, ‘9’, … , ‘.’, …, ‘#’, ‘*’, …}
  * 布尔型：表示真假，取值为：{True， False}

以这些基础类型为构件，可以构造出一些复杂的结构类型。比如我们之前讲过的数组，每个数组里面就可以包含多个某一基础类型的数据值。其中存储的元素数据值的类型，也是数组自己的类型。

不同的编程语言在扩展类型上差别很大，不过大多数高级语言都会支持数组和串（字符串），字符串就是一个字符的序列，比如“hello
world”就是一个字符序列（一串字符），字符串是一个非常重要的数据类型。

此外还有一些扩展类型在高级语言中比较常见，例如：结构、元组、记录、列表、表格等等。

> 虽然数据类型繁多缭乱，但在本课的范围内，我们只关心整型、浮点型、字符型、布尔型、字符串，以及整型数组、浮点型数组、字符数组和字符串数组就好。

### 数据类型的作用

编程语言在处理数据的时候（具体而言就是处理一个个数据值的时候），会依据不同类型对一类数据值进行一致的操作，这些操作包括：

  * 判断数据值在程序中的状态是不是符合规范；
  * 对数据值执行某些特定运算；
  * 为数据值分配存储空间；
  * ……

### 针对数据类型的数据存储分配

编程语言运行环境为某一类型的数据值分配对应该类型大小的存储空间——此处对应前面讲过的 **存储空间的分配**
——简单说就是编程语言会根据一个数据值具体属于什么类型，来确定该在内存中给它分配一个多大的存储空间。

形象类比一下就是：仓库管理员会根据一件货物的所属类型，决定在仓库里为它分配一个多大的货架。

![enter image description
here](https://images.gitbook.cn/184a8d00-8e69-11e9-8b59-31dbfb08ea2d)

当然除了语言和类型，具体一个数据值占多大空间（多少字节）还和计算机体系结构及操作系统有关。

整型值在某些32位系统上的C语言中，占据4个字节（bytes）的存储空间，在另外一些32位系统上，则仅占2个字节。

我们不过牵涉这么多细节 ，下面所说的均以64位x86-64体系计算机上的Windows操作系统中的语言实现为准：

  * C语言中的一个int类型（整型）数据值 **占位** 为：4 bytes
  * Java语言中的一个int类型数据值 **占位** 为：4 bytes

#### 了解数据占位的重要性

看到这里你是不是觉得奇怪——“跟我说这些干嘛？整数就是整数，什么字节啊，占位啊，关我啥事儿啊？”

刚开始学编程的时候，作者也是这么想的。

那个时候上计算机专业课，一上来不讲怎么编写程序，先讲数据类型，还要背诵什么数据类型占多少字节多少位，然后不同语言，不同操作系统，不同硬件体系还不一样！

“
_WTF！应试教育，就会教这些没用的，背一大堆数字有用吗？你看看人家美国——其实根本也不知道美国计算机怎么学，反正就是坚信人家肯定不用背这些——所以你看看人，再看看中国高等教育，必然倒退几十年啊~~_
” ，当年作者如是想。

但是后来遇到了一个问题：计算100的阶乘——用Java来编程实现。

这也太容易了吧，从100倒着往下乘不就得了，写一个循环结构，从100开始，每次把乘数减1，乘以上一次循环的结果不就完了嘛。

    
    
    public class OneHundredFactorial {
         public static void main(String []args){
            int num = 1;
            for(int i = 100; i > 0; i --)
            {
                num = num * i;
            }        
            System.out.println ("result is: " + num);
         } 
    }
    

写的代码很简单，逻辑清晰、结构严谨，可是运行结果却是0！

这是怎么回事？它是怎么算的？于是我加入了中间过程打印语句：

    
    
    public class OneHundredFactorial {
         public static void main(String []args){
            int num = 1;
            for(int i = 100; i > 0; i --)
            {
                num = num * i;
                System.out.format("current num is %d, and current temporary result is %d.%n", i, num);
            }        
            System.out.println ("result is: " + num);
         } 
    }
    

然后再次运行，结果是下面这样：

![enter image description
here](https://images.gitbook.cn/2f3b9e10-90d9-11e9-b7af-49a8adc1ae17)

结果为什么是0呢？ 都是正数相乘，中间结果怎么会有负数呢？为什么呢？？？

经过一通手忙脚乱的debug，最后发现，程序出错的原因是： **整型值溢出** 了。

什么叫整型值溢出？

要搞清楚这件事，我们需要先了解一下计算机存储数据的细节 。

> **小贴士**
> ：本课不讲Java，上面的Java代码仅仅是为了引出溢出错误的。其中语法我们不讲，也没必要现在看懂，可以直接忽略它。如果你很想看看上面代码的运行结果，可以用在线Java运行工具（比如https://www.jdoodle.com/online-
> java-compiler）运行。

