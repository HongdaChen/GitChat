上一篇我们介绍了算法模式中的分治法，现在继续介绍迭代法，我们一般在求解一个问题的时候，都是使用明确的方法或计算公式，带入已知量，一次性求得问题的解。但是如果用计算机解决这些问题，常常因为各种原因无法直接求解，比如求解一元高次方程的问题。针对这种情况，人们提出了很多迭代法来近似求解这类问题，比较常见的有梯度法、最小二乘法和牛顿迭代法，只要问题的解是可收敛的（或者是局部可收敛的），都可以使用迭代法求解。数学意义上的迭代法是一种不断用变量的旧值递推新值的过程，其对应的迭代算法也是用计算机解决问题的一种基本方法。

### 迭代法和递推法的关系

迭代法一般用于求解数学问题，比如求解一元高次方程、线性和非线性方程组和曲线拟合等问题。迭代的基本点就是迭代公式，一般也理解为递推公式，这常常让人对迭代法和递推法产生混淆，认为这两个概念是等同的。事实上，这两个概念还是有点差异的，迭代法作为很多数学问题的求解算法，是解决数学问题的一种常用的算法模式，可以独立构成解决问题的算法。递推法作为一种设计算法的常用思想，没有固定的算法实现模式，通常是与其他算法模式配合形成算法实现。比如线性动态规划问题，一般都有明确的子问题最优解递推公式，递推思想常常作为算法实现的一部分融入到动态规划算法的实现中。

对于迭代法，还有一种更广泛的观点，就是所有使用了迭代思想的算法实现，都可以理解为是使用了迭代法。从这个角度理解，除了线性动态规划算法，遗传算法、退火算法等算法也可归入迭代法的范畴。关于这一观点，仁者见仁，读者可自己体会。

### 迭代法的基本思想

迭代法的实现，一般需要确定以下三个要点。

  * **确定迭代变量** ：迭代变量一般就是要求解的问题的解，利用迭代递推公式可以不断地由旧值递推出新值。根据问题的不同，迭代变量可以是一个，也可以是多个。确定迭代变量，通常还要根据迭代递推关系给出迭代变量的初始值，这一点也很重要。
  * **确定迭代递推关系** ：迭代递推关系是根据旧值计算新值的关系或公式，这是迭代法实现的关键，如果不能确定迭代关系，则无法用迭代法实现算法。
  * **确定迭代终止条件** ：迭代终止条件是控制迭代过程退出的关键条件。迭代不可能无休止地进行，必须设置迭代终止条件，在适当的时候退出迭代。迭代终止条件一般有三种假设：其一是迭代变量已经求得问题的精确值；其二是迭代变量无法得到精确值，但是某个迭代的值的精度已经满足要求；其三是指定明确的迭代计算次数。迭代算法的具体实现，可根据问题的类型选择迭代终止条件。一般情况下，为了防止迭代关系在某个区间上发散（不收敛）使得算法进入死循环，都会把第三个条件作为异常退出条件和其他迭代终止条件配合使用，也就是说，即使无法得到符合条件的解，只要迭代计算次数达到某个限制值，也退出迭代过程。

狭义的迭代法一般指用于求解数学问题的算法实现，在这种情况下，迭代法是相对比较简单的算法模式，因为根据问题的数学原理，迭代法的三个要点都可以直接获得。

### 迭代法的例子

计算一个数的平方根，数学上一般用迭代法，常用的迭代递推公式是：

$$ x_{n+1}=\frac{1}{2}(x_{n}+\frac{a}{x_{n}}) $$

这一节我们就根据这个迭代公式写出算法实现，这是一个简单的例子，但是迭代法的三个要素都有体现。迭代递推关系就是上面的递推公式，迭代变量就是要计算的平方根 $x
_{i}$。当某次迭代计算后得到的 $x_ {i}$
符合精度要求，则迭代计算终止，除此之外，为了防止在给出的初始值附近无法收敛，还要给出一个控制迭代计算次数的控制条件。

确定了这三个迭代法的关键要素，算法的实现就非常简单了，算法的主体就是用循环结构进行迭代变量的递推计算：

    
    
    std::pair<bool, double> cl_root(double a, double eps)
    {
        double xi = a / 2.0; //初始值用 a 的一半，很多人的选择
        double xt;
        int count = 0;
        do
        {
            xt = xi;
            xi = (xt + (a / xt)) / 2.0;
            count++; //用于检查是否收敛的计数器
            if (count >= LOOP_LIMIT)
            {
                return {false, 0.0}; //不收敛，返回失败 
            }
        } while (std::fabs(xi - xt) > eps);
    
        return { true, xi };
    }
    

### 答疑与交流

为了方便与作者交流与学习，GitChat 编辑团队组织了一个专栏读者交流群，添加小助手-
伽利略微信：「GitChatty6」，回复关键字「259」给小助手伽利略获取入群资格。

![avatar](https://images.gitbook.cn/FsONnMw_1O_6pkv-U-ji0U1injRm)

