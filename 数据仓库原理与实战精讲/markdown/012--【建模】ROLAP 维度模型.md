在数据仓库的 ROLAP 模型中，维度模型是被使用最多、最经典的一种模型。能够提高数据仓库的分析计算性能。

在维度模型中，表被分为维度表、事实表，维度表围绕事实表进行解释。

其中事实表是一张表的基本数据，而维度表则是对数据的一种组织方式，常用于不同维度对数据进行组织。如图所示，商品表为事实表，而分类表则是维度表。

![](https://images.gitbook.cn/0e0b6ca0-ef85-11ea-b27a-6f83744fa302)

在实际生活中，按照维度去对数据进行筛查是非常常见的一种手段。如在购物网站购买手机时，可以按照品牌、CPU
型号、屏幕尺寸等条件对手机进行删选。筛选条件就是维度，而筛选出来的手机数据就是事实。

![](https://images.gitbook.cn/19e617a0-ef85-11ea-b2cc-b183c5e37897)

一般常见的维度类型有：分类、时间、地域等。

在维度模型中，根据维度的排布又分为星型模型、雪花模型、星座模型。模型建立后，方便对数据进行多维分析。

如下图所示，可以统计当前城市每年的空气质量情况、每月的空气质量、每天的空气质量，从而在时间维度上完成不同粒度的快速分析任务。

![](https://images.gitbook.cn/27447c70-ef85-11ea-80b6-61caae27bd5a)

![](https://images.gitbook.cn/327579f0-ef85-11ea-813e-7720407984bb)

![](https://images.gitbook.cn/3dcc7600-ef85-11ea-b2cc-b183c5e37897)

### 星型模型

标准的星型模型维度只有一层，分析性能最优

![](https://images.gitbook.cn/55209930-ef85-11ea-b2cc-b183c5e37897)

中间为事实表，然后通过 key 值的记录来关联其他维度表。

### 雪花模型

雪花模型具有多层维度，比较接近三范式设计，较为灵活，但牺牲掉了部分分析性能。

![](https://images.gitbook.cn/62371f90-ef85-11ea-b2cc-b183c5e37897)

### 星座模型

星座模型基于多个事实表，事实表之间会共享一些维度表。这是大型数据仓库中的常态，是业务增长的结果，与模型设计无关。

因为无论模型是星型还是雪花，在业务规模逐渐增长的情况下，都会出现维度共用，从而形成星座模型。

![](https://images.gitbook.cn/6ebed370-ef85-11ea-889f-9de3f88b5342)‘

### 宽表模型

无论是 ER、Data Value、Anchor 还是刚刚讲的维度模型，这些都是较为经典的数仓模型理论。数仓的出现较早，开始时都是使用高配数据库或者 MPP
来构建的，所以这些模型依托于单机或集群数据库，分析性能表现优秀。但是在大数据的数仓中，表现却不那么好；因为处理模式不同，大数据的数仓不适合大量
join，所以多表的拆分对其性能的发挥有较大的影响。

所以就需要对经典模型进行改造和衍生，那宽表模型就是维度模型的衍生。它将维度表冗余到事实表中，形成宽表，以减少 join 操作，所以适合 join
性能不佳的数据仓库产品。

![](https://images.gitbook.cn/7e345870-ef85-11ea-b27a-6f83744fa302)

所以，理论在运用到具体实践中的时候，一定要贴合相应的产品性能、场景做出一定的调整，灵活运用。

### 小结

本节主要讲了 ROLAP
模型中的经典——维度建模。这也是传统数据仓库中使用最多的一种模型。维度模型将表分为事实表、维度表，根据它们排布组合的不同，形成星型模型、雪花模型、星座模型三种。星型模型性能好，雪花模型较为灵活，而大型数据仓库中星座模型是常态。但在大数据数据仓库这里，维度模型做了进一步的衍生、妥协，合并成为宽表，以减少数据移动产生的代价。

